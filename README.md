# 課題10 -オススメの本の登録アプリ-

## ①課題内容（どんな作品か）
- オススメの本を登録するアプリです。
- 本をサーチして、それに対しておすすめ度とコメントを入力できます。
- 登録された本の一覧をCSV出力、入力ができます。（管理者画面のみ：登録されている仮のDBでは、id: administrator pw: admin)

## ②工夫した点・こだわった点
- 前回の課題9から、ログイン機能を追加しました。（課題）
- 前回までは、隠ボタンで管理者画面に行っていましたが、管理者フラグを持つユーザーのみが表示できるようにしました。
- 同様に、CSVのインポート、エクスポートも管理者のみが行えるようにしました。
- 本の登録画面では、ログインしている人のメールアドレスと名前が自動的に入るようにしました。
- ログインユーザーが登録したものだけ、編集、削除ができるようにしました。
-
- フォームを更新したら2回登録となるので、リロードによる多重投稿を防止するようにリダイレクト処理を追加しました。
- 登録フォームで、おすすめ本は、サーチボタンを押すと検索ページに飛べるようにしました。
- 本を検索出来るシートに飛び、Google Books APIで検索、本の名前と著者名をローカルストレージに保存し、フォームに自動的に入力できるようにしました。
- そのため、名前とemailは自動的にログインユーザーのものが入力されている
- 検索欄は一応バリデーション処理をしています。（文字数制限、禁止文字なし）
- ユーザー側のおすすめ一覧は、emailなどの個人情報は表示しないようにしましたが、管理側はidも含めて見られるようにしています。
- オススメリストでは、昇順、降順ボタンと検索ボタンをつけました。
- ログインしていないユーザーでも、サムネイルと題名、コメントが見られます。
- 今回はCSSはBootstrapを使って行った

## ③難しかった点・次回トライしたいこと(又は機能)
- 時間がなくて、APIのBook IDの取得をしてという形にはしていないので、もう一工夫したい
- 色々なものが出てくると、何に何が書かれているのかが混乱するので、うまくやりたい。
- CSSがうまく当たらないのでBootstrapを使った。でも使うのが優しそうで難しいと感じた。もう少し使いこなせるようになりたい。

## ④質問・疑問・感想、シェアしたいこと等なんでも
- [質問] 
- [感想] 元々色々作りすぎていたのか、ログイン画面を作って、色々遷移させようとすると混乱することがあった。ER図とまではいかなくても、関係性がわかるようにしておく必要はあると痛感した。
- [参考記事] 
	- 1.https://getbootstrap.jp/docs/5.0/getting-started/introduction/

## 目次（多くなって分からなくなりそうなので書いておく）
	-1.index.php …　登録フォーム
	-2. funcs.php   バリデーション処理関数他、関数一覧
	-3.thankyou.php  リダイレクト処理
	-4. write.php 　DBへ追加機能
	-5.result.php   ユーザーが見るおすすめ一覧表
	-6.resultAdmin.php 管理者画面から見えるおすすめ一覧
	-7.totalling.php   レーディングのグラフ
	-8.search.php   APIを使った本の検索画面と処理
	-9.import_csv.php  csvインポート用画面
	-10.process_import.php csvインポート処理
	-11.export_csv.php  csvエクスポート機能
	-12.edit.php  編集画面と処理
	-13.delete.php  削除機能
	-14.db_connect.php  DB接続に関する共通コード
	-15.administrator.php  管理者画面　
 	-16.update.php DB内のデータを編集する（コメントとレーディングのみ）
	-その他
		-upload フォルダ　　インポートするCSVを保管する
		-img フォルダ　　画像をストアしてあるフォルダ
		-css フォルダ　　cssファイルを格納
		-DBフォルダ　　課題確認用として、DBの中身が分かるもの
